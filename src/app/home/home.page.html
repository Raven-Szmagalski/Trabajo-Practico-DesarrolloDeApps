<ion-header>
  <ion-toolbar>
    <ion-item>
      <ion-avatar aria-hidden="true" slot="start">
        <img alt="" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
      </ion-avatar>
      <ion-label>Homer</ion-label>
    </ion-item>
    <ion-buttons slot="end">
      <ion-button (click)="openSettings()" size="small">
        <ion-icon slot="icon-only" ios="logo-apple" md="settings-sharp"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  <!-- Formulario para añadir una nueva nota -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Añadir Nueva Nota</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-input [(ngModel)]="newNoteTitle" placeholder="Título de la Nota"></ion-input>
      </ion-item>
      <ion-item>
        <ion-input [(ngModel)]="newNoteDescription" placeholder="Descripción de la Nota"></ion-input>
      </ion-item>
      <ion-button expand="block" (click)="addNote()">Añadir Nota</ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Lista de notas existentes -->
  <ion-list [inset]="true">
    <ion-item *ngFor="let note of notes; let i = index">
      <!-- Si está en modo edición, mostrar campos de entrada -->
      <ion-label *ngIf="editingIndex !== i">
        <h2>{{ note.title }}</h2>
        <p>{{ note.description }}</p>
        <ion-note color="medium">{{ note.date | date:'short' }}</ion-note>
      </ion-label>

      <!-- Mostrar campos de entrada si se está editando -->
      <ion-item *ngIf="editingIndex === i">
        <ion-input [(ngModel)]="note.title" placeholder="Editar Título"></ion-input>
        <ion-input [(ngModel)]="note.description" placeholder="Editar Descripción"></ion-input>
      </ion-item>

      <ion-buttons slot="end">
        <!-- Botones de acción según si se está editando o no -->
        <ion-button *ngIf="editingIndex !== i" color="primary" (click)="editNote(i)">
          <ion-icon name="create-outline"></ion-icon>
        </ion-button>
        <ion-button *ngIf="editingIndex === i" color="success" (click)="saveNote(i)">
          <ion-icon name="checkmark-outline"></ion-icon>
        </ion-button>
        <ion-button *ngIf="editingIndex === i" color="medium" (click)="cancelEdit()">
          <ion-icon name="close-outline"></ion-icon>
        </ion-button>
        <ion-button color="danger" (click)="deleteNote(i)">
          <ion-icon name="trash-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-item>
  </ion-list>
</ion-content>
